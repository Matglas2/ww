"use strict";var ww=window.ww||function(){var n={version:"1.0.0",scriptLibraries:[],cssFiles:[],loadScript:function(t){for(var r,e,i,u={},f=0;f<n.scriptLibraries.length;f++)if(n.scriptLibraries[f].scriptSrc===t){u=n.scriptLibraries[f];break}return u.hasOwnProperty("index")||(r={index:n.scriptLibraries.length,scriptSrc:t,status:"Loading"},n.scriptLibraries.push(r),u=n.scriptLibraries[n.scriptLibraries.length-1],e=document.getElementsByTagName("head")[0],i=document.createElement("script"),i.type="text/javascript",i.readyState&&(i.onreadystatechange=function(){this.readyState=="complete"&&n.scriptLoaded(r.index)}),i.onload=function(){n.scriptLoaded(r.index)},i.onerror=function(){r.status="Error";n.scriptError(r.index)},i.src=t,e.appendChild(i)),u},loadCss:function(t){for(var f,e,i,r={},u=0;u<n.cssFiles.length;u++)if(n.cssFiles[u].cssSrc===t){r=n.cssFiles[u];break}return r.hasOwnProperty("index")||(f={index:n.cssFiles.length,cssSrc:t},n.cssFiles.push(f),r=n.cssFiles[n.cssFiles.length-1],e=document.getElementsByTagName("head")[0],i=document.createElement("link"),i.type="text/css",i.rel="stylesheet",i.href=t,e.appendChild(i)),r},scriptLoaded:function(t){if(n.scriptLibraries[t].status!=="Error"){n.scriptLibraries[t].status="Complete";for(var i=0;i<n.apps.length;i++)n.apps[i].appStatus==="Waiting"&&n.apps[i].appScriptLoaded(t)}},scriptError:function(t){for(var i=0;i<n.apps.length;i++)n.apps[i].appStatus==="Waiting"&&n.apps[i].appScriptError(t)},apps:[],appObj:function(){return{appId:"",appName:"",appType:"",appBind:null,appElement:{},appStatus:"Not Started",appScripts:[],appCss:[],appExecPriority:0,appMaxPriority:0,startLoading:function(){var r,u,t,i;if(this.appCss.length>0)for(r=0;r<this.appCss.length;r++)u=n.loadCss(this.appCss[r].src),this.appCss[r].index=u.index;for(this.appMaxPriority=this.appScripts[this.appScripts.length-1].priority,t=0;t<this.appScripts.length;t++)this.appScripts[t].priority===0&&(this.appStatus="Waiting",i=n.loadScript(this.appScripts[t].src),this.appScripts[t].status=i.status,this.appScripts[t].index=i.index,i.status==="Complete"?this.appScriptLoaded(i.index):i.status==="Error"&&this.appScriptError(i.index))},appScriptLoaded:function(t){for(var i=0,u=!1,o=!1,e=null,r,s,f,i=0;i<this.appScripts.length;i++)this.appScripts[i].index===t&&(e=this.appScripts[i]);if(e!==null&&(e.status="Complete",e.priority===this.appExecPriority)){for(o=!0,i=0;i<this.appScripts.length;i++)this.appScripts[i].priority===this.appExecPriority&&this.appScripts[i].status!=="Complete"&&(o=!1);if(o)for(u=!0;u&&this.appExecPriority<=this.appMaxPriority;)for(u=!0,this.appExecPriority++,i=0;i<this.appScripts.length;i++)this.appScripts[i].priority===this.appExecPriority&&this.appScripts[i].status!=="Complete"&&(r=n.loadScript(this.appScripts[i].src),this.appScripts[i].status=r.status,this.appScripts[i].index=r.index,r.status!=="Complete"&&(u=!1),r.status==="Error"&&this.appScriptError(r.index));if(u)if(this.appStatus="Complete",this.appType==="angular")try{window.angular.bootstrap(this.appElement,[this.appName]);console.log(this.appName+"("+this.appId+") loading complete.")}catch(h){console.log("Error bootstrapping application: "+this.appName+"("+this.appId+")");console.log(h)}else if(this.appBind!=undefined&&this.appBind.length>0){for(s=this.appBind.split("."),f=window,i=0;i<s.length;i++)f=f[s[i]];typeof f=="function"?(f(this.appElement),console.log(this.appName+"("+this.appId+") with function: "+this.appBind+" loading complete.")):console.log("Error bootstrapping application: "+this.appName+"("+this.appId+") with function: "+this.appBind)}}},appScriptError:function(n){for(var t=0;t<this.appScripts.length;t++)this.appScripts[t].index===n&&(this.appStatus="Error",console.log(this.appName+"("+this.appId+") failed to load script: "+this.appScripts[t].src))}}},appScriptObj:function(){return{index:-1,src:"",priority:0,status:"NotLoaded"}},appCssObj:function(){return{index:-1,src:""}}};return n}();(function(){var y,o,s,i,h,r,u,t,f,c,e,a;try{for(var v=!0,n=document.documentElement;n.childNodes.length&&n.lastChild.nodeType===1;)n=n.lastChild;y=n.parentNode;o=n.src;o=o.substring(0,o.lastIndexOf("/")+1);s=n.getAttribute("ww-appName");i=n.getAttribute("ww-appType");i===null&&(i="");i.length>0&&(i=i.toLowerCase(),v=["angular"].indexOf(i)>-1);h=n.getAttribute("ww-appBind");h===null&&(h="");r=null;try{r=JSON.parse(n.getAttribute("ww-appScripts"))}catch(l){console.log("Error parsing ww-appScripts tag: "+l)}u=null;try{u=JSON.parse(n.getAttribute("ww-appCss"))}catch(l){console.log("Error parsing ww-appCss tag: "+l)}if(r!==null&&s.length>0&&(i.length>0||h.length>0)&&v){for(t=new ww.appObj,t.appId=s+ww.apps.length,t.appName=s,t.appType=i,t.appBind=h,t.appElement=y,f=0;f<r.length;f++)c=new ww.appScriptObj,r[f].src.substring(0,2)==="~/"&&(r[f].src=r[f].src.replace("~/",o)),c.src=r[f].src,c.priority=r[f].priority||0,t.appScripts.push(c);if(u!=undefined)for(e=0;e<u.length;e++)a=new ww.appCssObj,u[e].src.substring(0,2)==="~/"&&(u[e].src=u[e].src.replace("~/",o)),a.src=u[e].src,t.appCss.push(a);ww.apps.push(t);t.startLoading()}else console.log("Unable to load app: "+s+".  Error in script tag.")}catch(l){console.log(l)}})();
//# sourceMappingURL=pnp-ww.min.js.map
